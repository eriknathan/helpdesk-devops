{% extends 'base.html' %}{% block title %}{{ project.name }} — HelpDesk DevOps{% endblock %}{% block content %}<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="mb-6">{% if is_admin_view %}<a href="{% url 'projects:admin_list' %}" class="text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">← Voltar para Projetos (Admin)</a>{% else %}<a href="{% url 'projects:list' %}" class="text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">← Voltar para Projetos</a>{% endif %}</div><div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6"><div class="bg-gradient-to-r {% if project.is_active %}from-blue-600 to-cyan-600{% else %}from-gray-500 to-gray-600{% endif %} px-6 py-6"><div class="flex items-center justify-between"><div class="flex items-center space-x-4"><h1 class="text-2xl font-bold text-white">{{ project.name }}</h1><span class="px-2.5 py-0.5 text-xs font-medium rounded-full bg-white/20 text-white">{% if project.is_active %}Ativo{% else %}Inativo{% endif %}</span></div>{% if is_admin_view %}<div class="flex items-center space-x-2"><a href="{% url 'projects:admin_edit' project.pk %}" class="px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-lg hover:bg-white/30 transition-colors duration-200">Editar</a><form method="post" action="{% url 'projects:admin_delete' project.pk %}" onsubmit="return confirm('Tem certeza que deseja excluir este projeto?')">{% csrf_token %}<button type="submit" class="px-4 py-2 bg-rose-500/80 text-white text-sm font-medium rounded-lg hover:bg-rose-600 transition-colors duration-200">Excluir</button></form></div>{% endif %} </div><p class="text-sm text-white/80 mt-2">Criado em {{ project.created_at|date:'d/m/Y' }}</p></div><div class="p-6"><p class="text-sm text-gray-600">{{ project.description|default:'Sem descrição' }}</p></div></div><div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2 space-y-6"><div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"><div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center"><h2 class="text-lg font-semibold text-gray-900">Membros do Projeto</h2><span class="text-xs font-medium text-gray-500">{{ members.count }} membro{{ members.count|pluralize }}</span></div>{% if members %}<table class="w-full text-sm text-left"><thead class="bg-gray-50 border-b border-gray-200"><tr><th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wide">Nome</th><th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wide">E-mail</th><th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wide">Perfil</th> {% if is_admin_view %}<th class="px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wide">Ações</th>{% endif %} </tr></thead><tbody class="divide-y divide-gray-100">{% for member in members %}<tr class="hover:bg-gray-50 transition-colors duration-150"><td class="px-6 py-4 text-gray-900 font-medium">{{ member.full_name|default:member.email }} </td><td class="px-6 py-4 text-gray-600">{{ member.email }}</td><td class="px-6 py-4"><span class="px-2.5 py-0.5 text-xs font-medium rounded-full {% if member.is_admin %}bg-indigo-100 text-indigo-700{% else %}bg-sky-100 text-sky-700{% endif %}">{{ member.get_role_display }}</span></td>{% if is_admin_view %}<td class="px-6 py-4"><form method="post" action="{% url 'projects:member_remove' project.pk member.pk %}" onsubmit="return confirm('Remover {{ member.first_name }} do projeto?')">{% csrf_token %}<button type="submit" class="text-rose-600 hover:text-rose-800 text-xs font-medium">Remover</button></form></td>{% endif %} </tr>{% endfor %}</tbody></table>{% else %}<div class="text-center py-12"><p class="text-gray-500 text-sm">Nenhum membro neste projeto.</p></div>{% endif %} </div></div>{% if is_admin_view and add_member_form %}<div class="lg:col-span-1"><div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden sticky top-6"><div class="px-6 py-4 border-b border-gray-200 bg-gray-50"><h2 class="text-sm font-semibold text-gray-900 uppercase tracking-wide">Adicionar Membro</h2></div><div class="p-6"><form method="post" action="{% url 'projects:member_add' project.pk %}" class="space-y-4">{% csrf_token %}<div><label for="id_user" class="block text-xs font-medium text-gray-700 mb-1">Selecione o Usuário</label>{{ add_member_form.user }}{% if add_member_form.user.errors %}<p class="text-rose-600 text-xs mt-1">{{ add_member_form.user.errors.0 }}</p>{% endif %} </div><button type="submit" class="w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg shadow-sm hover:bg-blue-700 transition-all duration-200">Adicionar ao Projeto</button></form></div></div></div>{% endif %} </div></div>{% endblock %}
